# 密码学的认知

## 基本认知

1. 密码学是科学 :: 一般情况下不要自行设计密码学算法.
2. 密码学理论是公开的 :: 流行的密码学算法其算法实现是公开的, 经过长时间的考验. 自行设计的算法根本不具备严格的数学模型.
3. 密码学算法是相对安全的
4. 密码学攻击方法是多样化的
5. 密码学应用标准很重要
6. 不具备很强的数学知识也能掌握密码学

## 密码学的四个目标

1. 机密性 :: 如果数据具备机密性, 那么传输的数据就是无意义的数字, 只有拥有密钥才能解释这些数据, 密钥是加密算法的关键.
2. 完整性 :: 接收方能够确保接收到的数据就是发送方发送的原始数据, 如果被篡改, 接收方有策略知晓数据被篡改. 密码学中主要使用消息验证码(MAC)算法保证完整性.
3. 身份验证 :: 接收方确认发送方的身份, 发送方也要确保接收方的身份.
4. 不可抵赖性 :: 数字签名技术能够避免抵赖.

## OpenSSL

`openssl` 库包含常用密码学算法.

# 随机数

很多密码学算法内部都会使用到随机数.

## 随机数的类型

| 名称 | 生成类型 | 特性 | 说明 |
| --- | --- | --- | --- |
| TRNG | 硬件生成 | 效率高,随机,不可预测,不可重现 | 从物理设备获取 |
| PRNG | 软件生成 | 效率高,随机 | 通过算法获取 |
| CPRNG | 软件生成 | 效率高,随机,不可预测 | 用于密码学 |
1. 效率 :: 短时间内生成
2. 随机 :: 随机数不存在统计学偏差
3. 不可预测 :: 随机数之间不存在关联
4. 不可重现 :: 不管经过多长时间, 不会产生完全相同的随机数

## 原理

随机数生成器内部会维护一个状态, 对于 `TRNG` 来说, 内部状态的数值来自外部设备, 称为熵. 比如动态的时间, 变化的温度, 声音的变化, 鼠标位置等.

对于 `PRNG` 来说, 内部状态的数值来自于模拟的数值, 称为种子.

## 常见随机数生成器

| 算法名称 |
| --- |
| Blum Blum Shub |
| Mersenne Twister |
| Linear congruential generator |


**密码学随机数生成算法**

| 算法名称 | 说明 |
| --- | --- |
| 块密码算法CTR模式 | 属于对称加密算法 |
| 摘要函数 | 具备单向性 |
| 流密码算法 | 对称加密算法, 内部会产生一个 `keystream` |

## 密码学算法中的随机数

| 名称 | 说明 |
| --- | --- |
| 密钥 | 对称加密算法, 公开密钥算法, MAC算法 |
| 初始化向量 | 块密码算法中很多迭代模式会使用IV |
| nonce | 块密码算法中的CTR模式, AEAD加密模式会用到nonce |
| slat | 基于口令的加密算法会用到 |

# Hash

## 加密基元

加密基元就是一些基础的密码学算法, 通过它们才能构建更多的密码学算法, 协议, 应用程序.

| 算法名称 | 说明 |
| --- | --- |
| MAC消息验证码 | HMAC就是一个基于Hash算法实现的MAC算法 |
| 伪随机数生成器 | 利用Hash算法的单一性特点构造一个随机数 |
| 基于口令的加密算法 | 通过口令和Hash算法生成一个密钥 |
| 数字签名 | 数字签名算法对Hash算法生成的摘要值进行签名 |
| 块密码加密算法 | 基于Hash算法能生成块密码加密算法, 同时块密码加密算法也能生成一个Hash算法 |
密码学 `Hash` 和普通的 `Hash` 算法不是同一个概念, 密码学 `Hash` 算法有 `Hash` 算法的所有特性, 但从安全的角度考虑, 密码学 `Hash` 算法还有其它的一些特性. 基于普通 `Hash` 算法实现的应用, 比如 `Hash` 表和 `checksums` 不能用于密码学.

